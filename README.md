# Сервис обрабатывающий клиентские запросы

## Назначение
Может обработать клиентские запросы сгенерированные с помощью [генератора](https://github.com/vladimir163/lead-generator)
 
## Способ запуска/разворачивания 

Сервис запускается в докере.
Для его запуска необходимо выполнить следующие шаги
1. `gil pull` скачать проект в папку `client_requests_handler`
2. `cd /client_requests_handler` зайти в директорию проекта
4. скопировать `.env.example` в файл `.env`
5. выполнить команду `docker network create reqgen` для создания сети для нашего приложения
6. выполнить команду `docker-compose up -d --build`

### Просмотр результата
После того как контейнеры поднимутся и сервис отработает первый раз, то результаты 
можно будет увидеть в папке `persistence/client_requests` (там будет файл `requests.txt`) которая должна появиться в корне проекта.

### Просмотр логов
Если хотим посмотреть логи, то нужно выполнить `docker ps` найти контейнер `client_request_handler` (по идее должно быть `client_requests_handler_client_request_handler_1`)
и выполнить команду `docker logs <имя или id контейнера> -f`.

Более удобный посмотреть с помощью `portainer` который будет доступен по http://127.0.0.1:50000.
Для этого нужно 
1. задать пароль для `admin`, к примеру `11111111`
2. зайти в список контейнеров  `http://127.0.0.1:50000/#/containers` (с лева)
3. нажать на тот для которого хотим посмотреть логи
4. нажать на `Logs`

В конце пишется время за сколько были обработаны заявки 

## Способ остановки
Для остановки сервис в корне проекта нужно выполнить команду `docker-compose down`.